<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>单词管理与听写系统</title>
  <style>
    body { font-family: sans-serif; margin:0; padding:0; background:#f9f9f9; }
    header { background:#4CAF50; color:#fff; padding:10px; text-align:center; }
    nav { display:flex; justify-content:center; background:#333; }
    nav button { background:none; border:none; color:#fff; padding:14px 20px; cursor:pointer; }
    nav button:hover { background:#575757; }
    .container { padding:20px; }
    .hidden { display:none; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th, td { border:1px solid #ddd; padding:8px; text-align:left; }
    th { background:#f2f2f2; }
    .correct { color:green; }
    .incorrect { color:red; }
    .input-word { width:100%; padding:4px; }
    .btn { margin-top:10px; padding:6px 12px; }
  </style>
</head>
<body>
  <header><h1>单词管理与听写系统</h1></header>
  <nav>
    <button onclick="showSection('manage')">单词管理</button>
    <button onclick="showSection('quiz')">听写统计</button>
    <button onclick="showSection('dictate')">默写练习</button>
  </nav>
  <div class="container">
    <!-- 单词管理 -->
    <section id="manage">
      <h2>单词管理</h2>
      <label>选择日期: <select id="dateSelect"></select></label>
      <table>
        <thead><tr><th>单词</th><th>中文释义</th><th>拼写</th></tr></thead>
        <tbody id="wordTable"></tbody>
      </table>
    </section>
    <!-- 听写统计 -->
    <section id="quiz" class="hidden">
      <h2>听写统计</h2>
      <button class="btn" onclick="showStats()">查看成绩统计</button>
      <div id="stats"></div>
    </section>
    <!-- 默写练习 -->
    <section id="dictate" class="hidden">
      <h2>默写练习</h2>
      <label>选择日期: <select id="dictDate"></select></label>
      <form id="dictForm"></form>
      <button class="btn" onclick="gradeTest()">完成并批改</button>
      <div id="result"></div>
    </section>
  </div>
  <script>
    // 数据
    const data = {
      '2025-08-01': [
        {word:'instinctively', meaning:'本能地'},
        {word:'sheer', meaning:'完全的；陡峭的；绝对的'},
        /* ... 其余 37 项 ... */
        {word:'would they not', meaning:'他们难道不会...吗？'}
      ]
    };
    // 初始化日期选择
    function init() {
      const dates = Object.keys(data);
      const manageSel = document.getElementById('dateSelect');
      const dictSel = document.getElementById('dictDate');
      dates.forEach(d=>{
        [manageSel, dictSel].forEach(sel=>{
          const opt=document.createElement('option'); opt.value=d; opt.textContent=d; sel.appendChild(opt);
        });
      });
      manageSel.onchange = loadWords;
      dictSel.onchange = loadDictForm;
      loadWords(); loadDictForm();
    }
    // 加载管理表格
    function loadWords() {
      const d = document.getElementById('dateSelect').value;
      const tbody = document.getElementById('wordTable'); tbody.innerHTML='';
      data[d].forEach(item=>{
        const tr=document.createElement('tr');
        tr.innerHTML=`<td>${item.word}</td><td>${item.meaning}</td>`;
        const ok='<td class="correct">✅</td>';
        tr.innerHTML+=ok;
        tbody.appendChild(tr);
      });
    }
    // 加载默写表单
    function loadDictForm() {
      const d = document.getElementById('dictDate').value;
      const form = document.getElementById('dictForm'); form.innerHTML='';
      data[d].forEach((item,i)=>{
        const div=document.createElement('div');
        div.innerHTML=`<label>${item.meaning}</label><input class="input-word" id="w${i}" placeholder="输入英文单词">`;
        form.appendChild(div);
      });
    }
    // 批改并保存
    function gradeTest() {
      const d = document.getElementById('dictDate').value;
      const correct= [], errors= [];
      data[d].forEach((item,i)=>{
        const ans=document.getElementById('w'+i).value.trim();
        if(ans.toLowerCase()===item.word.toLowerCase()) correct.push(item.word);
        else errors.push({word:item.word, attempt:ans});
      });
      const record = JSON.parse(localStorage.getItem('records')||'[]');
      record.push({date:d, total:data[d].length, right:correct.length, errors});
      localStorage.setItem('records', JSON.stringify(record));
      document.getElementById('result').innerHTML=`<p>正确: ${correct.length}/${data[d].length}</p>`;
    }
    // 显示统计成绩
    function showStats() {
      const rec = JSON.parse(localStorage.getItem('records')||'[]');
      const out = rec.map(r=>`<p>${r.date} - 正确 ${r.right}/${r.total} 错误: ${r.errors.map(e=>e.word).join(', ')}</p>`).join('');
      document.getElementById('stats').innerHTML=out;
    }
    function showSection(s) {
      ['manage','quiz','dictate'].forEach(id=> document.getElementById(id).classList.toggle('hidden', id!==s));
    }
    init();
  </script>
</body>
</html>
